我是甘迪文（Demon Gan），《Windows黑客编程技术详解》的作者


本科就读于华北电力大学，专业是信息安全，后保研到北京邮电大学，也是安全方向，至今研究生三年级。毕业后，将继续到清华大学攻读博士学位
自己的编程路线大致为：
C → C++ → MFC → Windows开发→80x86汇编→ Win32汇编→ Windows内核开发
熟悉Windows用户程序开发和Windows内核安全开发。一直来对恶意程序的技术较为关注
总的来说，自己的技术面较窄，仅对Windows系统上的一些系统开发技术有所了解，对其他操作系统了解不深
由于都在学校里读书，所以工作经历比较少，主要就是研究生阶段被导师外派到某研究机构，负责Windows远控程序方面的分析和研究工作，在那儿呆了一年半..之后，便去了360企业安全政企云实习，负责Windows驱动开发和安全运营，在那儿呆了四个多月..17年8月份，开始进行自己的技术整理，打算把自己熟悉的技术都写一篇对应的技术文档分享到网络上，18年1月份完稿
之后，将文档整理之后，觉得可以出书，于是便联系了出版社的编辑，继续修改书稿至18年6月份，前后花费了14个月的时间
18年12月份，《Windows黑客编程技术详解》就正式开始上市了.很感谢大家对这本书的支持，特别要感谢玄魂大大的系列宣传以及安排了今晚的交流活动

好的，接下来我给大家整体介绍下《Windows黑客编程技术详解》这本书的内容
由于之前自己撰写好的一大堆技术文档独立性很强，所以出版社傅编辑给我的修改建议是：书介绍的知识一定要成系统！
于是，经过一番调研之后，决定按照恶意程序的功能作用对其所使用的技术进行归纳和划分
恶意程序通常的执行流程是：植入→启动（自启动）→对抗（免杀、反调试）→提权→驻留隐藏→信息收集或者攻击→数据回传（压缩、加密、传输）

知识要成体系学习比较好，这让理解的更加透彻
病毒木马也会有驱动，接下来将会讲到接着往下看就了解了
windows的内核并不开源，所以在内核开发过程中，需要掌握一定的逆向知识
根据技术所处于的执行级别不同划分为：用户层和内核层两大类。所以，本书的主要内容就是总结并介绍恶意程序整个生命周期所涉及的开发技术
通常情况下，恶意程序的整个执行流程都可以通过用户层实现。但是，随着病毒技术与反病毒技术的博弈，恶意程序要想实现深度的隐藏通常要使用内核Rootkit技术
内核模式下的Rootkit在Windows内核层下实现，通常大量使用为文档化的数据结构、API函数以及硬编码数据，从而占有系统的底层控制权，绕过杀软的查杀
所以，包含在用户层部分的常见功能模块有：
1. 注入技术
2. 启动技术
3.自启动技术
4. 提权技术
5. 隐藏技术
6. 数据压缩技术
7. 数据加密技术
8. 数据传输技术
9. 常见的用户层实现的功能
相对于用户层上的技术来说，内核层的技术更为底层能够有效绕开多数杀软的监控。
所以，包含在内核层部分的常见功能模块有：
1. 文件管理技术
2. 注册表管理技术
3. 常见的HOOK技术
4. 监控技术
5. 反监控技术
6. 常见的内核层实现的功能
接下来，分别介绍用户层下各个功能模块包含的具体技术：

注入技术，介绍了全局钩子注入、远线程注入、突破SESSON 0隔离的远线程注入、APC注入等内容
启动技术，介绍了创建进程API、突破SESSON 0隔离创建用户进程、内存直接加载运行等知识
自启动技术，涵盖了注册表自启动、快速启动目录自启动、计划任务自启动和系统服务自启动等内容

提权技术，包含进程访问令牌权限提升、Bypass UAC等内容
压缩技术，介绍了数据压缩API、ZLIB压缩库等知识
加密技术，介绍了Windows自带的加密库、Crypto++密码库等知识
传输技术，介绍了Socket通信、FTP通信、HTTP通信、HTTPS通信等知识
用户层功能技术，讲解了进程遍历、文件遍历、桌面截屏、按键记录、远程CMD、U盘监控、文件监控、自删除等知识

下面介绍一下内核层下各个功能模块包含的具体技术：
文件管理技术，介绍了文件管理中用到的内核API、IRP、NTFS解析等知识
注册表管理技术，讲解了注册表管理中用到的API、HIVE文件解析等知识
HOOK技术，介绍了SSDT HOOK、过滤驱动等知识
监控技术，讲解了进程创建监控、模块加载监控、注册表监控、对象监控、Minifilter文件监控、WFP网络监控等内容
反监控技术，与监控技术相反，它介绍了反进程创建监控、反线程创建监控、反模块加载监控、反注册表监控、反对象监控、反Minifilter文件监控等内容
内核层常用的功能，介绍了驱动隐藏、进程隐藏、TDI网络通信、强制结束进程、文件保护、文件强删等知识
所以，这本书大致系统地总结了Windows系统上恶意程序在用户层和内核层上常用的编程开发技术，同时给出相应的配套代码例子方便读者自己进行操作，加深理解
配套代码是自己写书的时候，重写过的，规范了下代码风格，弄好了调用接口，方便今后使用
当然，这些技术都不是我首创的，大都是老技术了，为此，我特地将这些技术调通，使之兼容32位和64位的win7至win10
其中，免杀技术以及反调试技术是恶意程序的核心技术
而且，内容反病毒技术日新月异，不好进行测试；这部分内容对初学者要求较高，故略去。同时，也便于出版内容过审


大家有问题都可以提
Yyj2013:
大佬 SESSON 0隔离创建用户进程 这个主要是为了什么  x64 HOOK有吗（过pg的内容）


Demon Gan:
 SESSON 0隔离创建用户进程 主要是为了创建界面交互的进程，默认情况下的服务进程，由于session 隔离，只能运行于后台，不能交互

HOOK在书中也有介绍，介绍了SSDT HOOK技术原理，当然这个仅适用于32位系统；也介绍了32位和64位下的Inline Hook技术原理；也介绍了通过对现有驱动设备增加过滤驱动的方式实现的Hook技术

下面我们 请作者对订阅号留言提问的问题优先做解答
1.希望了解企业环境下，员工电脑windows 10的防御策略与防御技术。
对于这个问题，之前有帮朋友开发过一个安全策略的小软件工具，方便他设置电脑安全策略的...所以，如果是防御恶意程序的入侵的话，感觉可以做好计算机的安全策略。例如：1.身份鉴别：设置密码策略、启用登录失败处理功能等；
2.访问控制：设置共享文件夹权限、关闭关闭默认共享、关闭不必要端口、禁用不必要服务、禁止用户开机自动登录、关闭Windows自动播放功能、禁用匿名远程连接等；
3.安全审计：启用审核策略等；
4.入侵防御：安装杀软、操作系统应遵循最小安装的原则、操作系统应遵循最小安装的原则等；
5.资源控制：配置登录终端的操作超时锁定等；
如果是防御内部员工的窃密的话：
1. 网络访问控制；
2. 透明加解密系统；
3. 禁用U盘；

2.对于小白来说，应该学习哪些方面，能有一个完整的体系？
这是任晓珲大牛画的安全学习流程图，感觉这个图总结得很好。这个图主要将安全大致分为网络攻防方向和软件安全方向，还给出了各个方向所需的前提知识。感兴趣的可以参考看看

3.想问一下你们如何解决webscarab只能代理http流量不能代理https流量的的问题 我按照官网的教程添加证书然而并没有用 还是软件过时了
webscarab这个我没有了解过，但是看它的介绍，应该是支持代理https流量的吧，可能还是配置问题。具体的配置，可以请教下群里其他弄过的大佬们才行....答案：换工具

5.您好，作为一名计科的大学生，我对信息安全方向很感兴趣。我有尝试了解过北邮的信息安全专业的课程设置，其与我们普通计科学生在专业性方面有很大区别表现在更加注重通信原理与数字编码的等方向上的教学。而我们学习的计算机科学与技术，似乎比较宽泛。我想请问的是：
一，如果选择信息安全为专业方向，是否需要参照北邮的课程设置和专业知识学习进度，如果不需要，那该如何结合计科专业学习信息安全。
二，同时，倘若本科结束后即就业，在竞争力方面是否不如于科班出身的信安？您对走这条路的学生的考研建议是？
三，想请问信息安全和网络安全的关系是？
回答一：其实你会发现，信息安全专业和计算机专业的学科培养方案非常相似，甚至有些学校不会单设信息安全专业，把他并入了计算机的一个研究方向。所以我的建议是，先学计算机的通识课，有能力的时候课外学习信安的知识
回答二：一般来说，肯定是没有本专业信安的人有竞争力，毕竟密码学等专业课没了解学习过。但是不排除自学成才的大牛，计算机专业的实践能力很重要
回答三：没有太大的区别，两者没有特别清晰的划界，有重叠的部分。网络安全侧重于研究网络环境下的计算机安全；信息安全侧重于计算机数据和信息的安全

6. 请问一下国内网络安全的研究生主要是什么方向的？是偏向于渗透实战方向还是密码学方向？
这个我对其他学校的情况不是很了解，对于北邮的话，各个方向都有，不同实验室其实负责的方向是不一样的。但是对于学生人数来说，应该是WEB渗透方向的人数较多，这可能是由于近年来渗透技术热度高的缘故吧
密码学方向的相对来说较少，主要是偏理论，而且对数学要求较高，身边同学几乎都不怎么喜欢密码学，太难了

7. 学长在北邮的日子怎样度过的？是常和战队人一起打比赛么？
自己不打ctf比赛因为自己之前看过ctf的题型，感觉自己的技术栈不适合打比赛，而自己更喜欢做开发吧
有时间就开发一些功能各异的小软件或者是小游戏，自娱自乐一下

8. 在您的多年的信息安全研究里面，数学分别起了什么样的作用？
数学主要是基础通识课...如果将来往算法方向发展，比如加密算法，就会对数学的要求很高
如果是往应用的开发的方向发展，实践更加重要，数学只要会简单的结论就可
而我自己的话，更偏向于应用开发方向，所以初中或者高中的数学应该满足大多数需求了

9. 可以介绍一下您的信安之路吗？
和上面任晓珲大牛的安全路线图很相似
虽然自己本科是信息安全专业，但是专业课程方案和软件工程的没啥区别，所以主要就学习了：C语言、C++、JAVA、汇编等编程语言
专业课学习了：操作系统、计算机组成原理、密码学、编译原理、数据库原理、网络工程、信息安全概论等课程
到了研究生阶段，因为是专硕，几乎就不上课了，所以通过项目接触并了解很多安全相关技术，从实践中学习

但对于编程的心得就一个字：练！码不停蹄地练，这应该对于计算机其他方向学习也是相通的吧

12. 老师的github地址或者个人博客地址可以分享一下吗？
有github，但是平时不怎么用，现在就只是上传了《Windows黑客编程技术详解》
https://github.com/DemonGan/Windows-Hack-Programming
自己有个个人博客   www.demongan.com
里面主要是自己平时做的一些小软件和小游戏

web渗透是不是目前企业里面需求量最大的？学过pwn转逆向病毒应该是很容易的吧，肯定没问题......web渗透抢手